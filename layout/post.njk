{% extends "_layout.njk" %}
{% from "_macro/ui.njk" import meta, render_tag with context %}
{% set toc_html = toc(page.content) %}

{% block content %}
<article class="content-article">
    <header class="text-center mb-8">
        <h1 class="page-title mb-4">
            {{ page.title }}
        </h1>
        {{ meta(page, true, "mb-4") }}
    </header>

    <div class="prose-shiro">
        {{ page.content }}
    </div>

    <!-- Tags -->
    {% if page.tags and page.tags.length > 0 %}
    <div class="mt-8 flex flex-wrap gap-2">
        {% for tag in page.tags.toArray() %}
        {{ render_tag(tag, false) }}
        {% endfor %}
    </div>
    {% endif %}

    <!-- Post Navigation -->
    <div class="mt-12 pt-8 border-t border-slate-200/70 flex justify-between items-center text-sm md:text-base">
        {% if page.prev %}
        <a href="{{ url_for(page.prev.path) }}" class="post-nav-link group text-left">
             <span aria-hidden="true">&larr;</span>
             <span class="post-nav-title">{{ page.prev.title }}</span>
        </a>
        {% else %}
        <div></div>
        {% endif %}

        {% if page.next %}
        <a href="{{ url_for(page.next.path) }}" class="post-nav-link group text-right">
            <span class="post-nav-title">{{ page.next.title }}</span>
            <span aria-hidden="true">&rarr;</span>
        </a>
        {% endif %}
    </div>

    {% include "_partial/comments/giscus.njk" %}
</article>
{% endblock %}

{% block post_toc %}
{% if toc_html %}
<aside class="post-toc-float" aria-label="目录">
    <div class="post-toc" data-collapsed="true" data-pinned="false">
        <button class="post-toc-toggle" type="button" aria-expanded="false">
            <span class="post-toc-bookmark" aria-hidden="true">
                <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                    <path d="M7.25 6.5a1 1 0 1 1-2 0a1 1 0 0 1 2 0zm0 5a1 1 0 1 1-2 0a1 1 0 0 1 2 0zm0 5a1 1 0 1 1-2 0a1 1 0 0 1 2 0zM10 6.5h9M10 11.5h9M10 16.5h9" />
                </svg>
            </span>
            <span class="post-toc-title">目录</span>
            <span class="post-toc-toggle-icon" aria-hidden="true"></span>
        </button>
        <div class="post-toc-body">
            {{ toc_html | safe }}
        </div>
    </div>
</aside>
{% endif %}
{% endblock %}
